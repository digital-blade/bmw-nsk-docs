# 1. Цель проекта

Разработать систему для Новосибирского BMW Клуба,
которая позволит управляющим и доверенным лицам клуба добавлять партнёров, указывать бонусы
предоставляемые партнёром для членов клуба и добавлять партнёрские заведения для
дальнейшего продвижения среди посетителей веб-приложения.


# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

1. Регистрация, аутентификация и авторизация.
2. Функционал партнёров.
3. Функционал статей.


## 2.1. Типы пользователей

Гость – это неавторизованный посетитель публичного приложения, который может просматривать
информацию о партнерах клуба и их бонусах, читать статьи на главной странице.

Авторизованный Пользователь – это зарегистрированный пользователь, который может редактировать
свой профиль и оставлять комментарии к статьям.

Модератор – это Авторизованный Пользователь, который обладает дополнительными правами для доступа
к административному веб-приложению, что позволяет ему управлять партнерами, добавлять и
редактировать статьи, удалять комментарии.


## 2.2. Регистрация

При регистрации пользователя должны быть запрошены следующие поля:

* телефон — обязательное поле

После отправки формы регистрации на указанный номер телефона приходит одноразовый СМС пароль
для входа.


## 2.3. Аутентификация

Аутентификация осуществляется по номеру телефона и одноразовому СМС-паролю, который приходит на
этот номер телефона.


## 2.4. Функционал партнёров для Модераторов

При помощи административной панели Модераторы получают доступ к функционалу партнёров в Системе.
Этот функционал состоит из следующих блоков:

1. Создание и редактирование категорий
2. Создание и редактирование партнёров
3. Создание и редактирование партнёрских заведений.


### 2.4.1. Создание и редактирование категорий

В этом разделе модератор может создавать и редактировать уже существующие категории партнёров.

При сохранении категории должна быть проверка — нельзя создать две категории с одинаковым названием.
При этой проверке необходимо учесть раскладку: нельзя создать категорию "сто", если уже существует
категория "СТО".

Поля:
* название — обязательное поле

Категория — сущность, которая в дальнейшем определяет тип партнёрского заведения для фильтров.


### 2.4.2. Создание и редактирование партнёров

Партнёры существуют двух типов — основные и сервисные. Разделяются флагом "сервисный партнёр".
Сервисный партнёр это, к примеру, эвакуаторы, они не имеют Заведений и, как следует, не представляют
бонусы.

При создании партнёра должны быть запрошены следующие поля:

* логотип — обязательное поле
* название — обязательное поле
* ссылка на сайт — опционально
* телефон — опционально
* сервисный партнёр — опционально

После создания партнёр может быть отредактирован:

* логотип — обязательное поле
* название — обязательное поле
* ссылка на сайт — опционально
* телефон — опционально


### 2.4.3. Создание и редактирование партнёрских заведений

_Партнёрские заведения — ядро всего функционала партнёров, т.к. именно эти сущности будут видны
пользователям сайта, в том числе и на карте._

Партнёрские заведения - дочерняя сущность Партнёра, определяющая реальные здания в городе.

Таким образом, если у партнёра одно заведение это будет 1 Партнёр и 1 Заведение.

Если у партнёра сеть из 3 автомоек это будет 1 Партнёр и 3 Заведения.

Поля формы:

* телефон — опционально
* категории — обязательно
* адрес — обязательно

Для улучшения пользовательского опыта предполагается, что полей на самом деле больше,
однако поле адрес при наборе будет производить геокодинг содержимого поля —
разбирать введённый адрес и искать координаты по адресу при помощи специального API.

Реальный набор полей:

* телефон — опционально
* категории — обязательно
* город — обязательно
* район — опционально
* улица — обязательно
* номер дома — обязательно
* координаты — обязательно

### 2.4.4. Создание и редактирование бонусов от партнёров

Бонусы от партнёра — дочерняя сущность Партнёрского заведения, которая определяет какие скидки/акции и прочее
предоставляет партнёр членам клуба.

Бонусы должны создаваться/редактироваться на странице редактирования Партнёрского здания.

Так как невозможно точно определить какие бонусы могут предоставлять партнёры,
предлагается упростить систему — добавить строковый ввод, чтобы Модератор вручную
прописал предоставляемый бонус.

Поля:
* название — обязательно
* описание — обязательно

Название — краткое описание бонуса, которое будет использоваться при отображении в списках.

Описание — детальное описание бонуса, которое даёт большее обширное понимание о сути бонуса.

**Пример:**

_Название_: "Полировка"

_Описание_: "Промокод: BMW-NSK даёт 10% скидку. Используйте его для записи на услугу."

## 2.5. Функционал партнёров для Пользователей

На странице партнёров Пользователь может просмотреть список партнёров клуба и предоставляемые ими
бонусы.

Пользователь может воспользоваться фильтром по Категориям Партнёров и по районам, чтобы найти
ближайшего партнёра для своих целей.

Результат запроса партнёров с применёнными фильтрами дублируется на карте, для визуального отображения
местоположения заведений.
